<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Aptidão Guaraná - Análises</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Aptidão Guaraná</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Procurar"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Alternar de navegação" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-analises-boa-full" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Analises BOA Full</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-analises-boa-full">    
        <li>
    <a class="dropdown-item" href="./analises/regras_classificacao.html" rel="" target="">
 <span class="dropdown-text">Regras para classificação</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./analises/matriz_confusao.html" rel="" target="">
 <span class="dropdown-text">Matriz de confusão</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-analises-boa-r8" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Analises BOA R8</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-analises-boa-r8">    
        <li>
    <a class="dropdown-item" href="./analisesR8/regras_classificacao.html" rel="" target="">
 <span class="dropdown-text">Regras para classificação R8</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./analisesR8/matriz_confusao.html" rel="" target="">
 <span class="dropdown-text">Matriz de confusão R8</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Análises</li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Analises</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analises/correlacao_entre_atributos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Gráfico de correlação entre os atributos</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analises/matriz_confusao.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Matriz de confusão</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analises/Precisao_global_kappa.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Precisão global kappa</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analises/regras_classificacao.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regras para classificação</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analises/regressao_linear.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regressão linear</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analises/regressao_linear_cd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regressão linear CD</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">AnalisesR8</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analisesR8/matriz_confusao.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Matriz de confusão R8</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analisesR8/regras_classificacao.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regras para classificação R8</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Analisesv4</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analisesv4/Precisao_global_kappa.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Precisão global kappa</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analisesv4/regras_classificacao.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regras para classificação V4</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Rds</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rds/Readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Readme</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Análises</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Analises da aptdão do guaraná</p>
<!--

# Analises

> Conseguiu rodar as estatísticas do rpart (precisão global kappa,  RMS, matriz de confusão, gráfico de correlação entre os atributos, a equação de regressão)?


## matriz de confusão

Uma matriz de confusão é uma tabela usada para avaliar o desempenho de um modelo de classificação em problemas de aprendizado de máquina supervisionado. Ela compara as previsões do modelo com as classes verdadeiras dos dados para calcular várias métricas de desempenho, como precisão, sensibilidade, especificidade e assim por diante.

Em R, você pode calcular uma matriz de confusão usando a função `confusionMatrix` da biblioteca `caret`. Aqui está um exemplo de como fazer isso:

```R
# Instale e carregue a biblioteca "caret"
install.packages("caret")
library(caret)

# Suponha que você tenha um vetor de previsões (predicted) e um vetor de classes verdadeiras (actual)
predicted <- c(1, 2, 1, 2, 1, 2, 1, 2, 1, 2)  # Previsões do modelo
actual <- c(1, 2, 1, 2, 1, 2, 1, 2, 1, 1)      # Classes verdadeiras

# Crie uma matriz de confusão
confusion_matrix <- confusionMatrix(predicted, actual)

# Exiba a matriz de confusão
print(confusion_matrix)
```

Neste exemplo, você precisa substituir os vetores `predicted` e `actual` pelos resultados reais do seu modelo e pelas classes verdadeiras dos dados. A função `confusionMatrix` calculará a matriz de confusão e também fornecerá várias métricas de desempenho, como precisão, sensibilidade, especificidade, valor preditivo positivo (PPV), valor preditivo negativo (NPV) e assim por diante.

Lembre-se de que a biblioteca `caret` deve estar instalada e carregada antes de usar a função `confusionMatrix`. Você pode instalá-la com `install.packages("caret")` e carregá-la com `library(caret)`.



## RMS
Não se aplica.

O Root Mean Square Error (RMSE) é uma métrica comumente usada para avaliar a qualidade das previsões de um modelo de regressão, em que o objetivo é estimar um valor contínuo. No entanto, para comparar previsões de um modelo de classificação com as classes verdadeiras, você geralmente usaria outras métricas adequadas, como a matriz de confusão.



## Precisão global kappa


A precisão global e o índice kappa são métricas comuns usadas para avaliar a precisão de modelos de classificação em R. O índice kappa leva em consideração a concordância observada entre as previsões do modelo e as classes reais, ajustando-a para a concordância esperada ao acaso. Ele fornece uma medida da precisão do modelo que leva em consideração a chance de acerto aleatório.

Para calcular a precisão global e o índice kappa em R, você pode usar a função `confusionMatrix` da biblioteca `caret`. Aqui está um exemplo de como fazer isso:

```R
# Instale e carregue as bibliotecas necessárias
install.packages("caret")
library(caret)

# Suponha que você tenha um vetor de previsões (predicted) e um vetor de classes verdadeiras (actual)
predicted <- c(1, 2, 1, 2, 1, 2, 1, 2, 1, 2)
actual <- c(1, 2, 1, 2, 1, 2, 1, 2, 1, 1)  # Classes reais

# Crie uma matriz de confusão
conf_matrix <- confusionMatrix(predicted, actual)

# Obtenha a precisão global
accuracy <- conf_matrix$overall["Accuracy"]
cat("Precisão Global:", accuracy, "\n")

# Obtenha o índice kappa
kappa <- conf_matrix$overall["Kappa"]
cat("Índice Kappa:", kappa, "\n")
```

Neste exemplo, você deve substituir os vetores `predicted` e `actual` pelos resultados do seu modelo e pelas classes verdadeiras. A função `confusionMatrix` calculará a matriz de confusão e as métricas de precisão global e índice kappa para você.

Certifique-se de ter a biblioteca `caret` instalada e carregada usando a função `library(caret)` antes de executar o código acima.

## regressão linear para encontrar os pesos de cada variável 

Para realizar uma regressão linear e encontrar os pesos (coeficientes) de cada variável em relação a uma variável de resposta (target), você pode usar a função `lm()` em R. Aqui está um exemplo passo a passo:

1. Crie um conjunto de dados com suas variáveis independentes (preditoras) e a variável de resposta (target). Certifique-se de que os dados estejam organizados em um data frame.

```R
# Exemplo de criação de um conjunto de dados
conjunto_dados <- data.frame(
  Variavel1 = c(1, 2, 3, 4, 5),
  Variavel2 = c(2, 3, 4, 5, 6),
  Variavel3 = c(5, 4, 3, 2, 1),
  Target = c(10, 15, 20, 25, 30)
)
```

2. Realize a regressão linear usando a função `lm()`:

```R
# Realize a regressão linear
modelo <- lm(Target ~ Variavel1 + Variavel2 + Variavel3, data = conjunto_dados)
```

Neste exemplo, estamos realizando uma regressão linear em que `Target` é a variável de resposta e `Variavel1`, `Variavel2` e `Variavel3` são as variáveis independentes. Você pode adicionar ou remover variáveis independentes conforme necessário.

3. Visualize os resultados do modelo e os coeficientes (pesos) das variáveis:

```R
# Visualize os resultados do modelo
summary(modelo)
```

O comando `summary(modelo)` fornecerá informações detalhadas sobre a regressão linear, incluindo os coeficientes das variáveis independentes, seus desvios padrão e estatísticas t, bem como estatísticas globais, como o valor de R² que indica o ajuste do modelo aos dados.

Os coeficientes listados na saída do `summary(modelo)` são os pesos associados a cada variável independente. Por exemplo, você verá algo semelhante a:

```
Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)   5.0000     2.6517   1.887 0.121239    
Variavel1     5.0000     1.1180   4.467 0.012298 *  
Variavel2     5.0000     0.8944   5.590 0.006355 ** 
Variavel3    -5.0000     1.7578  -2.842 0.045702 *  
```

Neste exemplo hipotético, os coeficientes indicam os pesos associados a cada variável independente no modelo de regressão linear. Você pode interpretar esses coeficientes como o efeito que cada variável tem na variável de resposta.

## gráfico de correlação entre os atributos (cada variável )

Para criar um gráfico de correlação entre os atributos de um conjunto de dados em R, você pode usar a função `cor()` para calcular as correlações entre os atributos e, em seguida, usar um pacote de visualização, como o `ggplot2`, para criar o gráfico. Aqui está um exemplo passo a passo:

1. Carregue o pacote `ggplot2` se ainda não estiver instalado:

```R
install.packages("ggplot2")
library(ggplot2)
```

2. Crie um conjunto de dados de exemplo ou carregue seu próprio conjunto de dados.

3. Calcule a matriz de correlação usando a função `cor()`:

```R
# Exemplo: Criação de um conjunto de dados de exemplo
dados <- data.frame(
  Atributo1 = c(1, 2, 3, 4, 5),
  Atributo2 = c(2, 3, 4, 5, 6),
  Atributo3 = c(5, 4, 3, 2, 1)
)

# Calcule a matriz de correlação
matriz_correlacao <- cor(dados)
```

4. Crie um gráfico de calor (heatmap) para visualizar as correlações usando a biblioteca `ggplot2`:

```R
# Crie um gráfico de calor das correlações
ggplot(data = melt(matriz_correlacao), aes(x = Var1, y = Var2, fill = value)) +
  geom_tile() +
  scale_fill_gradient(low = "blue", high = "red") +
  theme_minimal() +
  labs(title = "Matriz de Correlação")
```

Neste exemplo, estamos criando um gráfico de calor das correlações entre os atributos no conjunto de dados de exemplo. A função `melt()` é usada para converter a matriz de correlação em um formato adequado para o `ggplot2`.

Certifique-se de substituir `dados` pelo seu próprio conjunto de dados. O gráfico de calor mostrará a intensidade das correlações entre os atributos, onde cores mais claras indicam correlações positivas mais fortes e cores mais escuras indicam correlações negativas mais fortes.
-->



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiada");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>